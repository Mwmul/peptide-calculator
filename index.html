<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Peptide Dose Calculator</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      body {
        background-color: #e6f3ff;
        font-family: Arial, sans-serif;
        padding: 20px;
      }
      .container {
        max-width: 700px;
        background: white;
        border-radius: 10px;
        padding: 20px;
        box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
      }
      .question {
        display: none;
        margin-bottom: 20px;
      }
      .question.active {
        display: block;
      }
      #result {
        display: none;
      }
      select {
        width: 100%;
      }
      #restartBtn {
        display: none;
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1 class="text-center mb-4">Peptide Dose Calculator</h1>

      <div id="q1" class="question active">
        <label class="form-label">What peptide are you using?</label>
        <select id="peptide" class="form-select">
          <option value="">Select...</option>
          <option value="semaglutide">semaglutide</option>
          <option value="tirzepatide">tirzepatide</option>
          <option value="retatrutide">retatrutide</option>
        </select>
      </div>

      <div id="q2" class="question">
        <label class="form-label">How many mg is your vial?</label>
        <select id="vialMg" class="form-select">
          <option value="">Select...</option>
          <option value="10">10mg</option>
          <option value="15">15mg</option>
          <option value="20">20mg</option>
          <option value="30">30mg</option>
          <option value="40">40mg</option>
          <option value="50">50mg</option>
          <option value="60">60mg</option>
        </select>
      </div>

      <div id="q3" class="question">
        <label class="form-label">What kind of syringe are you using?</label>
        <select id="syringe" class="form-select">
          <option value="">Select...</option>
          <option value="1ml">1ml</option>
          <option value="3ml">3ml</option>
          <option value="0.5ml(50units)">0.5ml(50units)</option>
          <option value="1ml(100units)">1ml(100units)</option>
        </select>
      </div>

      <div id="q4" class="question">
        <label class="form-label"
          >How much BAC water would you like to add to the vial?</label
        >
        <select id="bacWater" class="form-select">
          <option value="">Select...</option>
          <option value="1">1ml</option>
          <option value="2">2ml</option>
          <option value="3">3ml</option>
        </select>
      </div>

      <div id="q5" class="question">
        <label class="form-label"
          >What weekly dose would you like to take?</label
        >
        <select id="dose" class="form-select">
          <option value="">Select...</option>
          <option value="0.125">0.125mg</option>
          <option value="0.25">0.25mg</option>
          <option value="0.375">0.375mg</option>
          <option value="0.5">0.5mg</option>
          <option value="0.625">0.625mg</option>
          <option value="0.75">0.75mg</option>
          <option value="0.875">0.875mg</option>
          <option value="1">1mg</option>
          <option value="1.125">1.125mg</option>
          <option value="1.25">1.25mg</option>
          <option value="1.375">1.375mg</option>
          <option value="1.5">1.5mg</option>
          <option value="1.625">1.625mg</option>
          <option value="1.75">1.75mg</option>
          <option value="1.875">1.875mg</option>
          <option value="2">2mg</option>
          <option value="2.125">2.125mg</option>
          <option value="2.25">2.25mg</option>
          <option value="2.375">2.375mg</option>
          <option value="2.5">2.5mg</option>
          <option value="2.625">2.625mg</option>
          <option value="2.75">2.75mg</option>
          <option value="2.875">2.875mg</option>
          <option value="3">3mg</option>
          <option value="3.125">3.125mg</option>
          <option value="3.25">3.25mg</option>
          <option value="3.375">3.375mg</option>
          <option value="3.5">3.5mg</option>
          <option value="3.625">3.625mg</option>
          <option value="3.75">3.75mg</option>
          <option value="3.875">3.875mg</option>
          <option value="4">4mg</option>
          <option value="4.125">4.125mg</option>
          <option value="4.25">4.25mg</option>
          <option value="4.375">4.375mg</option>
          <option value="4.5">4.5mg</option>
          <option value="4.625">4.625mg</option>
          <option value="4.75">4.75mg</option>
          <option value="4.875">4.875mg</option>
          <option value="5">5mg</option>
          <option value="5.125">5.125mg</option>
          <option value="5.25">5.25mg</option>
          <option value="5.375">5.375mg</option>
          <option value="5.5">5.5mg</option>
          <option value="5.625">5.625mg</option>
          <option value="5.75">5.75mg</option>
          <option value="5.875">5.875mg</option>
          <option value="6">6mg</option>
          <option value="6.125">6.125mg</option>
          <option value="6.25">6.25mg</option>
          <option value="6.375">6.375mg</option>
          <option value="6.5">6.5mg</option>
          <option value="6.625">6.625mg</option>
          <option value="6.75">6.75mg</option>
          <option value="6.875">6.875mg</option>
          <option value="7">7mg</option>
          <option value="7.125">7.125mg</option>
          <option value="7.25">7.25mg</option>
          <option value="7.375">7.375mg</option>
          <option value="7.5">7.5mg</option>
          <option value="7.625">7.625mg</option>
          <option value="7.75">7.75mg</option>
          <option value="7.875">7.875mg</option>
          <option value="8">8mg</option>
          <option value="8.125">8.125mg</option>
          <option value="8.25">8.25mg</option>
          <option value="8.375">8.375mg</option>
          <option value="8.5">8.5mg</option>
          <option value="8.625">8.625mg</option>
          <option value="8.75">8.75mg</option>
          <option value="8.875">8.875mg</option>
          <option value="9">9mg</option>
          <option value="9.125">9.125mg</option>
          <option value="9.25">9.25mg</option>
          <option value="9.375">9.375mg</option>
          <option value="9.5">9.5mg</option>
          <option value="9.625">9.625mg</option>
          <option value="9.75">9.75mg</option>
          <option value="9.875">9.875mg</option>
          <option value="10">10mg</option>
          <option value="10.125">10.125mg</option>
          <option value="10.25">10.25mg</option>
          <option value="10.375">10.375mg</option>
          <option value="10.5">10.5mg</option>
          <option value="10.625">10.625mg</option>
          <option value="10.75">10.75mg</option>
          <option value="10.875">10.875mg</option>
          <option value="11">11mg</option>
          <option value="11.125">11.125mg</option>
          <option value="11.25">11.25mg</option>
          <option value="11.375">11.375mg</option>
          <option value="11.5">11.5mg</option>
          <option value="11.625">11.625mg</option>
          <option value="11.75">11.75mg</option>
          <option value="11.875">11.875mg</option>
          <option value="12">12mg</option>
          <option value="12.125">12.125mg</option>
          <option value="12.25">12.25mg</option>
          <option value="12.375">12.375mg</option>
          <option value="12.5">12.5mg</option>
          <option value="12.625">12.625mg</option>
          <option value="12.75">12.75mg</option>
          <option value="12.875">12.875mg</option>
          <option value="13">13mg</option>
          <option value="13.125">13.125mg</option>
          <option value="13.25">13.25mg</option>
          <option value="13.375">13.375mg</option>
          <option value="13.5">13.5mg</option>
          <option value="13.625">13.625mg</option>
          <option value="13.75">13.75mg</option>
          <option value="13.875">13.875mg</option>
          <option value="14">14mg</option>
          <option value="14.125">14.125mg</option>
          <option value="14.25">14.25mg</option>
          <option value="14.375">14.375mg</option>
          <option value="14.5">14.5mg</option>
          <option value="14.625">14.625mg</option>
          <option value="14.75">14.75mg</option>
          <option value="14.875">14.875mg</option>
          <option value="15">15mg</option>
        </select>
      </div>

      <div id="result" class="mt-4"></div>
      <button id="restartBtn" class="btn btn-primary">Start Again</button>
    </div>

    <script>
      const questions = ["q1", "q2", "q3", "q4", "q5"];
      let current = 0;

      function showNext() {
        if (current < questions.length - 1) {
          current++;
          document.getElementById(questions[current]).classList.add("active");
        } else {
          calculate();
        }
      }

      function resetApp() {
        current = 0;
        questions.forEach((q) => {
          const question = document.getElementById(q);
          question.classList.remove("active");
          const select = question.querySelector("select");
          select.value = "";
          select.disabled = false;
        });
        document.getElementById("q1").classList.add("active");
        document.getElementById("result").style.display = "none";
        document.getElementById("result").innerHTML = "";
        document.getElementById("restartBtn").style.display = "none";
      }

      function getSyringeSize(syringe) {
        if (syringe === "1ml" || syringe === "1ml(100units)") return 1;
        if (syringe === "3ml") return 3;
        if (syringe === "0.5ml(50units)") return 0.5;
        return 1;
      }

      function isInsulinSyringe(syringe) {
        return syringe.includes("units");
      }

      function getUnitsPerMl(syringe) {
        if (syringe === "0.5ml(50units)") return 100;
        if (syringe === "1ml(100units)") return 100;
        return null;
      }

      function calculate() {
        const peptide = document.getElementById("peptide").value;
        const vialMg = parseFloat(document.getElementById("vialMg").value);
        const syringe = document.getElementById("syringe").value;
        const bacWater = parseFloat(document.getElementById("bacWater").value);
        const dose = parseFloat(document.getElementById("dose").value);

        const syringeSize = getSyringeSize(syringe);
        const isInsulin = isInsulinSyringe(syringe);
        const unitsPerMl = getUnitsPerMl(syringe);

        let reconInst = "";
        const fullSyringes = Math.floor(bacWater / syringeSize);
        const remainder = bacWater % syringeSize;
        if (fullSyringes > 0) {
          reconInst += `Using your ${syringe} syringe, draw ${syringeSize}ml of BAC water and inject it slowly into the vial of ${peptide} against the vial wall to avoid foaming. Do this ${fullSyringes} time${
            fullSyringes > 1 ? "s" : ""
          } to add a total of ${fullSyringes * syringeSize}ml. `;
        }
        if (remainder > 0) {
          const remUnits = isInsulin
            ? (remainder * unitsPerMl).toFixed(0)
            : null;
          reconInst += `Then, draw an additional ${remainder.toFixed(2)}ml${
            remUnits ? ` (${remUnits} units)` : ""
          } of BAC water and inject it slowly into the vial of ${peptide} against the vial wall. `;
        } else if (fullSyringes === 1) {
          reconInst = `Using your ${syringe} syringe, draw ${bacWater}ml of BAC water and inject it slowly into the vial of ${peptide} against the vial wall to avoid foaming. `;
        }
        reconInst += `Discard any leftover BAC water.`;

        const wait = `Gently swirl the vial and let it sit for 20-30 minutes to allow the ${peptide} powder to fully dissolve. Do not shake the vial, as this may damage the peptide.`;
        const concentration = vialMg / bacWater;
        const volumeMl = dose / concentration;
        let doseInst = `For your weekly dose of ${dose}mg, draw ${volumeMl.toFixed(
          2
        )}ml`;
        if (isInsulin) {
          const units = (volumeMl * unitsPerMl).toFixed(0);
          doseInst += ` (${units} units)`;
        }
        doseInst += ` into your syringe from the reconstituted vial.`;
        if (volumeMl > syringeSize) {
          const numInjections = Math.ceil(volumeMl / syringeSize);
          const splitVolume = (volumeMl / numInjections).toFixed(2);
          const splitUnits = isInsulin
            ? (splitVolume * unitsPerMl).toFixed(0)
            : null;
          doseInst += ` <strong>Warning: This volume exceeds your syringe's capacity (${syringeSize}ml${
            isInsulin ? ` or ${syringeSize * unitsPerMl} units` : ""
          }). Use a larger syringe or split the dose into ${numInjections} injections of ${splitVolume}ml${
            splitUnits ? ` (${splitUnits} units)` : ""
          } each (Spread across the week or administered consecutively on the same day). Alternatively, if the vial is not yet reconstituted, add less BAC water to achieve a higher concentration and reduce the dose volume.</strong>`;
        }
        doseInst += ` Administer as directed by your healthcare provider.`;

        const storeInst = `Store the reconstituted ${peptide} vial in the refrigerator at all times. Only remove it to draw and administer your weekly dose, then return it to the refrigerator immediately.`;

        const result = document.getElementById("result");
        result.innerHTML = `
                <h2>Instructions for ${peptide}</h2>
                <ol class="list-group list-group-numbered">
                    <li class="list-group-item">Prepare a sterile workspace and gather your ${vialMg}mg vial of ${peptide}, ${syringe} syringe, alcohol swabs, and BAC water. Use alcohol swabs to clean the top of the vial.</li>
                    <li class="list-group-item">${reconInst}</li>
                    <li class="list-group-item">${wait}</li>
                    <li class="list-group-item">${doseInst}</li>
                    <li class="list-group-item">${storeInst}</li>
                </ol>
            `;
        result.style.display = "block";
        document.getElementById("restartBtn").style.display = "block";
      }

      document.querySelectorAll("select").forEach((select) => {
        select.addEventListener("change", () => {
          if (select.value) {
            select.disabled = true;
            showNext();
          }
        });
      });

      document.getElementById("restartBtn").addEventListener("click", resetApp);
    </script>
  </body>
</html>
